!function(t,e){"function"==typeof define&&define.amd?define(["postal"],function(n){return t.myModule=e(n)}):"object"==typeof module&&module.exports?module.exports=t.myModule=e(require("postal")):t.myModule=e(t.postal)}(this,function(t){function e(){for(c=-(this.y>>0),l=c+o,a=0;a<f.length;a++)f[a]()}function n(t,e,n){i={};for(a in e)i[a]=d.map(t,0,1,e[a],n[a]);return i}function r(t){return t.hasOwnProperty("scroller")&&(t.scroller.on("scroll",e),t.scroller.on("scrollEnd",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1),s=$(t.scroller.scroller),u.resize(function(){for(o=u.height(),l=c+o,a=0;a<p.length;a++)p[a]();e()})),{recalculate:function(){for(o=u.height(),l=c+o,a=0;a<p.length;a++)p[a]()},destroy:function(){h=[],f=[],p=[]},addPiggy:function(t,e){var r,s,l,a,i,w,y=$(t),m=!1,O=0;return h.push(y),e.hasOwnProperty("start")&&e.hasOwnProperty("end")?(e.start.when.indexOf("%")!==-1&&(e.start.when=Number(e.start.when.split("%")[0])/100),e.start.is.indexOf("%")!==-1&&(e.start.is=Number(e.start.is.split("%")[0])/100),e.end.when.indexOf("%")!==-1&&(e.end.when=Number(e.end.when.split("%")[0])/100),e.end.is.indexOf("%")!==-1&&(e.end.is=Number(e.end.is.split("%")[0])/100),p.push(function(){r=y.position().top,s=y.height(),l=r+s*e.start.when,a=r+s*e.end.when}),f.push(function(){l<c+o*e.start.is&&a>c+o*e.end.is&&!m?(e.start.hasOwnProperty("call")&&!m&&e.start.call(),m=!0):(l>c+o*e.start.is||a<=c+o*e.end.is)&&m&&(m=!1,e.end.hasOwnProperty("call")&&e.end.call(),a>c+o*e.end.is?e.hasOwnProperty("scroll")&&(e.start.hasOwnProperty("vals")&&e.end.hasOwnProperty("vals")?e.scroll(e.start.vals):e.scroll({offset:0})):(m=!1,e.hasOwnProperty("scroll")&&(e.start.hasOwnProperty("vals")&&e.end.hasOwnProperty("vals")?e.scroll(e.end.vals):e.scroll({offset:1})))),m&&(i=Math.floor(c+o*e.start.is-l),w=Math.floor(a-(c+o*e.end.is)),O=d.map(i,0,i+w,0,1),e.hasOwnProperty("scroll")&&(e.start.hasOwnProperty("vals")&&e.end.hasOwnProperty("vals")?e.scroll(n(O,e.start.vals,e.end.vals)):e.scroll({offset:O})))}),void u.resize()):void console.warn("Must supply start:{} and end:{} objects. Look at the example in the documentation for details.")}}}var s,o,l,a,i,d={normalize:function(t,e,n){return(t-e)/(n-e)},interpolate:function(t,e,n){return e+(n-e)*t},map:function(t,e,n,r,s){return t<e&&(t=e),t>n&&(t=n),this.interpolate(this.normalize(t,e,n),r,s)}},u=$(window),c=0,h=[],f=[],p=[];return r});