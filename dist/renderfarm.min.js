!function(e,r){"function"==typeof define&&define.amd?define(["renderfarm"],function(t){return e.renderfarm=r(t)}):"object"==typeof module&&module.exports?module.exports=e.renderfarm=r(require("renderfarm")):e.renderfarm=r()}(this,function(){function e(){for(c=-(this.y>>0),o=c+s,a=0;a<h.length;a++)h[a]()}function r(e,r,t){l={};for(a in r)l[a]=i.map(e,0,1,r[a],t[a]);return l}function t(t){return t.hasOwnProperty("scroller")&&(t.scroller.on("scroll",e),t.scroller.on("scrollEnd",e),document.addEventListener("touchmove",function(e){e.preventDefault()},!1),n=$(t.scroller.scroller),d.resize(function(){for(s=d.height(),o=c+s,a=0;a<u.length;a++)u[a]();e()})),{recalculate:function(){for(s=d.height(),o=c+s,a=0;a<u.length;a++)u[a]()},destroy:function(){f=[],h=[],u=[]},addPiggy:function(e,t){var n,o,a,l,p,w,m=$(e),y=!1,O=0;return f.push(m),t.hasOwnProperty("start")&&t.hasOwnProperty("end")?(t.start.when.indexOf("%")!==-1&&(t.start.when=Number(t.start.when.split("%")[0])/100),t.start.is.indexOf("%")!==-1&&(t.start.is=Number(t.start.is.split("%")[0])/100),t.end.when.indexOf("%")!==-1&&(t.end.when=Number(t.end.when.split("%")[0])/100),t.end.is.indexOf("%")!==-1&&(t.end.is=Number(t.end.is.split("%")[0])/100),u.push(function(){n=m.position().top,o=m.height(),a=n+o*t.start.when,l=n+o*t.end.when}),h.push(function(){a<c+s*t.start.is&&l>c+s*t.end.is&&!y?(t.start.hasOwnProperty("call")&&!y&&t.start.call(),y=!0):(a>c+s*t.start.is||l<=c+s*t.end.is)&&y&&(y=!1,t.end.hasOwnProperty("call")&&t.end.call(),l>c+s*t.end.is?t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(t.start.vals):t.scroll({offset:0})):(y=!1,t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(t.end.vals):t.scroll({offset:1})))),y&&(p=Math.floor(c+s*t.start.is-a),w=Math.floor(l-(c+s*t.end.is)),O=i.map(p,0,p+w,0,1),t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(r(O,t.start.vals,t.end.vals)):t.scroll({offset:O})))}),void d.resize()):void console.warn("Must supply start:{} and end:{} objects. Look at the example in the documentation for details.")}}}var n,s,o,a,l,i={normalize:function(e,r,t){return(e-r)/(t-r)},interpolate:function(e,r,t){return r+(t-r)*e},map:function(e,r,t,n,s){return e<r&&(e=r),e>t&&(e=t),this.interpolate(this.normalize(e,r,t),n,s)}},d=$(window),c=0,f=[],h=[],u=[];return t});