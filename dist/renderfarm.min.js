!function(e,r){"function"==typeof define&&define.amd?define(["renderfarm"],function(t){return e.renderfarm=r(t)}):"object"==typeof module&&module.exports?module.exports=e.renderfarm=r(require("renderfarm")):e.renderfarm=r()}(this,function(){function e(){for(d=this.hasOwnProperty("y")?-(this.y>>0):n.scrollTop(),o=d+s,l=0;l<h.length;l++)h[l]()}function r(e,r,t){a={};for(l in r)a[l]=i.map(e,0,1,r[l],t[l]);return a}function t(t){return t.hasOwnProperty("scroller")?(t.scroller.on("scroll",e),t.scroller.on("scrollEnd",e),document.addEventListener("touchmove",function(e){e.preventDefault()},!1),n=$(t.scroller.scroller),c.resize(function(){for(s=c.height(),o=d+s,l=0;l<u.length;l++)u[l]();e()})):(n=$(window),n.scroll(function(){e()}),e(),c.resize(function(){for(s=c.height(),o=d+s,l=0;l<u.length;l++)u[l]();e()})),{recalculate:function(){for(s=c.height(),o=d+s,l=0;l<u.length;l++)u[l]()},destroy:function(){f=[],h=[],u=[]},addPiggy:function(e,t){var n,o,l,a,p,w,y=$(e),m=!1,O=0;return f.push(y),t.hasOwnProperty("start")&&t.hasOwnProperty("end")?(t.start.when.indexOf("%")!==-1&&(t.start.when=Number(t.start.when.split("%")[0])/100),t.start.is.indexOf("%")!==-1&&(t.start.is=Number(t.start.is.split("%")[0])/100),t.end.when.indexOf("%")!==-1&&(t.end.when=Number(t.end.when.split("%")[0])/100),t.end.is.indexOf("%")!==-1&&(t.end.is=Number(t.end.is.split("%")[0])/100),u.push(function(){n=y.offset().top,o=y.height(),l=n+o*t.start.when,a=n+o*t.end.when}),h.push(function(){l<d+s*t.start.is&&a>d+s*t.end.is&&!m?(t.start.hasOwnProperty("call")&&!m&&(console.log(n,o,l,a,d),d>n?t.start.call(!1):t.start.call(!0)),m=!0):(l>d+s*t.start.is||a<=d+s*t.end.is)&&m&&(m=!1,a>d+s*t.end.is?(t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(t.start.vals):t.scroll({offset:0})),t.end.hasOwnProperty("call")&&t.end.call(!1)):(m=!1,t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(t.end.vals):t.scroll({offset:1})),t.end.hasOwnProperty("call")&&t.end.call(!0))),m&&(p=Math.floor(d+s*t.start.is-l),w=Math.floor(a-(d+s*t.end.is)),O=i.map(p,0,p+w,0,1),t.hasOwnProperty("scroll")&&(t.start.hasOwnProperty("vals")&&t.end.hasOwnProperty("vals")?t.scroll(r(O,t.start.vals,t.end.vals)):t.scroll({offset:O})))}),void c.resize()):void console.warn("Must supply start:{} and end:{} objects. Look at the example in the documentation for details.")}}}var n,s,o,l,a,i={normalize:function(e,r,t){return(e-r)/(t-r)},interpolate:function(e,r,t){return r+(t-r)*e},map:function(e,r,t,n,s){return e<r&&(e=r),e>t&&(e=t),this.interpolate(this.normalize(e,r,t),n,s)}},c=$(window),d=0,f=[],h=[],u=[];return t});